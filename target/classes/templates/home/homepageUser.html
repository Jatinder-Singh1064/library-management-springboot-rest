<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Punjabi Library</title>
  <meta charset="UTF-8">
  <!-- <link th:href="@{../css/style.css}" rel="stylesheet" /> -->
	<link rel="stylesheet"
		href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
		crossorigin="anonymous">
</head>
<body>
<div th:replace="Fragments/header :: header(${userId})"></div>
<!--   <h1 th:text = "'Welcome ' + ${userId}" ></h1> -->
  <table>
  	<tr>
  		<td><a href = "/user/borrow">Borrowings</a></td>
  		<td><a href = "/user/history">History</a></td>
  	</tr>
  	<tr>
  		<td><a href = "/user/reserve">Reserve</a></td>
  		<td><a href = "/user/reserve">Return</a></td>
  	</tr>
  </table>
  <div class="container">
		<div class="row">
			<h1>My Reservations List</h1>	
		</div>
		<table class="table table-striped table-bordered">
			<thead class="table-dark">
					<tr>
						<th>Book Id</th>						
						<th>Borrowed By</th>
						<th>Borrow Date</th>
						<th>Action</th>
					</tr>
			</thead>	
			<tbody>
				<div th:if="${userReservations!=null and !userReservations.isEmpty()}">
					<tr th:each="reservation: ${userReservations}">
						<td th:text="${reservation.bookId}" />
						<td th:text="${reservation.userId}" />
						<td th:text="${reservation.borrowDate}" />						
						<td>							
							<a th:href="|user/reserve/cancelReservationByUser?id=${reservation.reservationId}|" class="btn btn-danger">Cancel</a>										
						</td>
					</tr>	
				</div>			
			</tbody>
		</table>
		
		<div class="row">
			<h1>My Books List</h1>	
		</div>
		<table class="table table-striped table-bordered">
			<thead class="table-dark">
					<tr>
						<th>Book Id</th>
						<th>Title</th>
						<th>ISBN</th>
						<th>Category</th>
						<th>Author</th>
						<th>Action</th>
					</tr>
			</thead>	
			<tbody>
				<div th:if="${userBooks!=null and !userBooks.isEmpty()}">
					<tr th:each="book: ${userBooks}">
						<td th:text="${book.bookId}" />
						<td th:text="${book.title}" />
						<td th:text="${book.isbn}" />
						<td th:text="${book.category}" />
						<td th:text="${book.author}" />
						<td>						
							<a th:href="|user/reserve/returnBook?bookId=${book.bookId}|" class="btn btn-primary">Return</a>											
						</td>
					</tr>	
				</div>			
			</tbody>
		</table>
	</div>
<div th:replace="Fragments/footer :: footer"></div>
</body>
</html>
